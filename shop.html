<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Выбор доната Free Fire</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
    font-family:Arial,sans-serif;
    background:linear-gradient(135deg,#1a1a2e,#16213e);
    color:white;
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
}

.container{
    width:100%;
    max-width:500px;
    background:rgba(255,255,255,.1);
    backdrop-filter:blur(10px);
    border-radius:20px;
    padding:30px;
    box-shadow:0 10px 30px rgba(0,0,0,.3);
}

.header{text-align:center;margin-bottom:25px}
.header h1{
    font-size:26px;
    background:linear-gradient(45deg,#00dbde,#fff);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.header p{color:#aaa}

.packages{display:flex;flex-direction:column;gap:15px;margin-bottom:25px}

.package{
    background:rgba(255,255,255,.08);
    border-radius:15px;
    padding:18px;
    cursor:pointer;
    border:2px solid transparent;
    transition:.3s;
    position:relative;
}
.package:hover{transform:translateY(-3px)}
.package.selected{
    border-color:#00dbde;
    background:rgba(0,219,222,.15);
}
.package.selected::after{
    content:"✓";
    position:absolute;
    top:10px;
    right:15px;
    background:#00dbde;
    width:24px;
    height:24px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:bold;
}

.package-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
}
.package-title{font-weight:bold}
.package-price{font-size:20px}
.package-bonus{font-size:13px;color:#4cd137;margin-top:5px}

.next-btn{
    width:100%;
    padding:16px;
    border:none;
    border-radius:15px;
    background:linear-gradient(45deg,#00dbde,#198a31);
    color:white;
    font-size:18px;
    cursor:pointer;
}
.next-btn:disabled{opacity:.5;cursor:not-allowed}

/* кнопка истории */
#historyBtn{
    position:fixed;
    top:15px;
    right:15px;
    background:#00dbde;
    border:none;
    color:black;
    padding:10px 14px;
    border-radius:20px;
    cursor:pointer;
    font-weight:bold;
}

/* модалка */
#historyModal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,.85);
    color:white;
    padding:40px;
}
</style>
</head>
<body>

<button id="historyBtn">История</button>

<div id="historyModal">
    <h2>История пополнений</h2>
    <div id="historyContent" style="margin:20px 0"></div>
    <button onclick="closeHistory()">Закрыть</button>
</div>

<div class="container">
    <div class="header">
        <h1><i class="fas fa-gem"></i> Пакеты алмазов</h1>
        <p>Выберите подходящий донат</p>
    </div>

    <div class="packages" id="packages"></div>

    <button class="next-btn" id="nextBtn" disabled onclick="goNext()">Продолжить</button>
</div>

<script>
const packagesData = [
 {name:"100 + 10 алмазов", price:95},
 {name:"310 + 31 алмаз", price:307},
 {name:"520 + 52 алмаза", price:499},
 {name:"1060 + 106 алмазов", price:1008},
 {name:"2180 + 218 алмазов", price:2002},
 {name:"5600 + 560 алмазов", price:4802},
];

let selectedIndex = null;
const list = document.getElementById("packages");

packagesData.forEach((p,i)=>{
    const div=document.createElement("div");
    div.className="package";
    div.onclick=()=>selectPackage(i);
    div.innerHTML=`
        <div class="package-header">
            <div class="package-title"><i class="fas fa-gem"></i> ${p.name}</div>
            <div class="package-price">${p.price} сом</div>
        </div>
        <div class="package-bonus">Бонус включён</div>
    `;
    list.appendChild(div);
});

function selectPackage(i){
    document.querySelectorAll(".package").forEach(p=>p.classList.remove("selected"));
    document.querySelectorAll(".package")[i].classList.add("selected");
    selectedIndex=i;
    nextBtn.disabled=false;
}

function goNext(){
    if(selectedIndex===null)return;
    localStorage.setItem("selectedPackage",JSON.stringify(packagesData[selectedIndex]));
    window.location.href="payment.html";
}

// история
historyBtn.onclick=()=>{
    const user=localStorage.getItem("username")||"Гость";
    const history=JSON.parse(localStorage.getItem("paymentHistory")||"[]")
        .filter(h=>h.username===user);

    historyContent.innerHTML = history.length
        ? history.map(h=>`<p>${h.date} — ${h.item} — ${h.amount} сом</p>`).join("")
        : "<p>История пуста</p>";

    historyModal.style.display="block";
}
function closeHistory(){historyModal.style.display="none"}
</script>

</body>
</html>
